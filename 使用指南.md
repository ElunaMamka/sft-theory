# SFT原理交互式教学系统 - 使用指南

## 项目概述

这是一个面向基础薄弱学生的SFT（监督式微调）原理教学系统，通过丰富的**可视化**和形象的**比喻**，帮助学生轻松掌握SFT的核心概念。

### 课程特色

✨ **形象的比喻**
- 大学毕业生的成长（预训练vs SFT）
- 电源适配器（LoRA）
- 园艺过程（数据迭代）
- 行为蓝图（数据集作用）

🎨 **丰富的可视化**
- 交互式图表展示训练曲线
- 动画演示LoRA工作机制
- 对比表格清晰展示差异
- 进度条展示工作流程

🎯 **互动式学习**
- 每部分结束都有测验题
- 可点击展开的示例代码
- 可调节的参数对比
- 分步骤的流程演示

## 快速启动

### 方法一：使用启动脚本（推荐）

```bash
cd sft-theory
./start.sh
```

启动脚本会自动：
1. 创建Python虚拟环境
2. 安装后端依赖
3. 安装前端依赖
4. 启动后端服务器（端口5000）
5. 启动前端开发服务器（端口5173）

### 方法二：手动启动

**后端：**
```bash
cd sft-theory/backend
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python server.py
```

**前端（新终端窗口）：**
```bash
cd sft-theory/frontend
npm install
npm run dev
```

## 访问系统

启动成功后，在浏览器中访问：
- 前端界面：http://localhost:5173
- 后端API：http://localhost:5000

## 课程结构

### 第一部分：预训练 vs SFT （约30分钟）

**核心内容：**
- LLM的两阶段成长之旅
- 预训练：奠定基础
- SFT：磨练技能
- 两阶段的共生关系
- SFT的真正作用

**可视化亮点：**
- 两阶段对比动画
- 预训练损失曲线
- 详细对比表格

**核心类比：** 🎓 大学毕业生 → 在职培训

---

### 第二部分：LoRA高效微调 （约30分钟）

**核心内容：**
- 全量微调的困境
- LoRA的工作机制
- 多种形象类比
- 可组合的AI技能

**可视化亮点：**
- LoRA工作原理动画
- 参数规模对比条
- 可调节模型大小
- Hub-and-Spoke架构图

**核心类比：** 🔌 电源适配器、📝 备考小抄、💡 聚光灯滤色片

---

### 第三部分：SFT数据集 （约30分钟）

**核心内容：**
- 数据质量三要素
- 指令-响应对格式
- 数据来源与构建
- 数据集作为行为蓝图

**可视化亮点：**
- 可展开的数据示例
- 质量评分展示
- 风格对比演示
- 数据质量检查清单

**核心类比：** 📐 行为蓝图、🎭 AI人格塑造

---

### 第四部分：SFT实践工作流 （约30分钟）

**核心内容：**
- 四步工作流程
- 详细步骤解析
- 常见问题解决
- 最佳实践清单

**可视化亮点：**
- 可交互的进度条
- 分步骤内容展示
- 训练曲线可视化
- 迭代循环动画

**核心类比：** 🌱 园艺过程、🍳 烹饪调火候

## 技术栈

### 前端
- **Vue 3** - 渐进式JavaScript框架
- **Vite** - 快速的开发服务器
- **TailwindCSS** - 实用优先的CSS框架
- **Chart.js** - 图表可视化库
- **Vue Router** - 路由管理

### 后端
- **Flask** - 轻量级Python Web框架
- **Flask-CORS** - 跨域资源共享
- **NumPy** - 数值计算

## 项目结构

```
sft-theory/
├── backend/                 # 后端服务
│   ├── server.py           # Flask服务器
│   └── requirements.txt    # Python依赖
├── frontend/               # 前端应用
│   ├── src/
│   │   ├── components/     # 可复用组件
│   │   │   ├── AnalogyBox.vue          # 类比展示框
│   │   │   ├── AnimatedIllustration.vue # 动画插图
│   │   │   ├── CodeBlock.vue            # 代码块
│   │   │   ├── ComparisonTable.vue      # 对比表格
│   │   │   ├── InfoCard.vue             # 信息卡片
│   │   │   ├── InteractiveChart.vue     # 交互图表
│   │   │   ├── ProgressSteps.vue        # 进度条
│   │   │   └── QuizBox.vue              # 测验框
│   │   ├── pages/          # 页面组件
│   │   │   ├── Home.vue    # 首页
│   │   │   ├── Part1.vue   # 第一部分
│   │   │   ├── Part2.vue   # 第二部分
│   │   │   ├── Part3.vue   # 第三部分
│   │   │   └── Part4.vue   # 第四部分
│   │   ├── App.vue         # 根组件
│   │   ├── main.js         # 入口文件
│   │   └── style.css       # 全局样式
│   ├── index.html
│   ├── package.json
│   └── vite.config.js
├── start.sh                # 启动脚本
├── README.md              # 项目说明
└── 使用指南.md            # 本文件
```

## 教学建议

### 适用对象
- AI/机器学习初学者
- 对LLM微调感兴趣的学生
- 想了解SFT原理的开发者
- 基础薄弱但有学习热情的学员

### 教学方式
1. **循序渐进**：按照Part1→Part2→Part3→Part4的顺序学习
2. **多做测验**：每部分的测验题帮助巩固理解
3. **关注类比**：类比框中的内容最通俗易懂
4. **实践操作**：查看代码示例，理解实际应用
5. **互动探索**：尝试调整参数、点击展开内容

### 重点强调
- ✅ SFT是塑造行为而非灌输知识
- ✅ 数据质量远比数量重要
- ✅ LoRA避免灾难性遗忘
- ✅ 迭代优化是关键

## API接口说明

后端提供以下API接口供前端调用：

- `GET /api/pretraining-stats` - 获取预训练统计数据
- `GET /api/sft-stats` - 获取SFT统计数据
- `GET /api/lora-comparison?model_size=7B` - 获取LoRA对比数据
- `GET /api/generate-training-curve?epochs=10` - 生成训练曲线
- `GET /api/dataset-examples` - 获取数据集示例
- `GET /api/analogy-data?type=graduate` - 获取类比数据

## 常见问题

### Q: 启动时提示端口被占用？
A: 修改端口号：
- 后端：编辑 `backend/server.py`，修改最后一行的端口
- 前端：编辑 `frontend/vite.config.js`，修改 `server.port`

### Q: 前端显示API连接失败？
A: 确保后端服务已启动（http://localhost:5000），检查浏览器控制台错误信息

### Q: npm install很慢？
A: 使用国内镜像：
```bash
npm config set registry https://registry.npmmirror.com
```

### Q: Python依赖安装失败？
A: 确保使用Python 3.7+，可能需要先升级pip：
```bash
pip install --upgrade pip
```

## 自定义与扩展

### 添加新的类比
编辑对应页面的Vue文件，使用 `AnalogyBox` 组件

### 添加新的可视化
使用 `InteractiveChart` 组件，传入Chart.js格式的数据

### 修改样式
编辑 `frontend/src/style.css` 或修改TailwindCSS配置

### 添加新的API
在 `backend/server.py` 中添加新的路由

## 贡献与反馈

如果您有任何建议或发现问题，欢迎：
- 提出改进建议
- 报告Bug
- 贡献新的类比和示例
- 优化可视化效果

## 许可证

本项目仅用于教学目的。

---

**祝学习愉快！🎉**

如有问题，请参考README.md或查看代码注释。

